{# TODO:
    - add video player
        - https://developers.google.com/youtube/iframe_api_reference
        - https://developers.google.com/youtube/player_parameters
        - determine default video
    - make pins resize
#}


<div class="bg-white py-12 mt-[15vh]">
    <div class="relative max-w-screen-lg mx-auto" x-data="{
        showVideo: true,
        videoUrl: 'https://www.youtube.com/embed/I1rA68yF4tM',
        openVideo(videoID) {
            this.videoUrl = 'https://www.youtube.com/embed/' + videoID;
            this.showVideo = true;
        },
        closeVideo() {
            this.showVideo = false;
        }
    }">
        {# map and pins #}
        <img src="./assets/map.svg" alt="world map">
        {% for pin in pins %}
        <div class="absolute z-10 left-[calc({{ pin.x }}%-22.5px)] bottom-[{{ pin.y }}%] cursor-pointer hover:animate-bounce-by-growing">
            <img @click="openVideo('{{ pin.videoID }}')" src="./assets/pin.svg" alt="{{ pin.name }}" class="h-16">
        </div>
        {% endfor %}

        {# video player #}
        <div x-show="showVideo" class="absolute top-1/3 right-16 z-20 bg-gray-50 justify-center pt-12 pb-6 px-8 rounded-3xl shadow-md-heavy">
            <button @click="closeVideo()" class="absolute top-4.5 right-4">
                <img src="./assets/x.svg" alt="Close video">
            </button>

            <iframe
                width="560"
                height="315"
                :src="videoUrl"
                frameborder="0"
                allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share"
                allowfullscreen
            >
            </iframe>
        </div>
    </div>
</div>
